# create plumber.R with packages

    Code
      cat(readr::read_lines(file.path(tmp_dir, "Dockerfile")), sep = "\n")
    Output
      # Generated by the vetiver package; edit with care
      
      FROM rocker/r-ver:<r_version>
      
      RUN apt-get update -qq && apt-get install -y --no-install-recommends \
        git \
        libcurl4-openssl-dev \
        libgit2-dev \
        libicu-dev \
        libsodium-dev \
        libssl-dev \
        make \
        zlib1g-dev
      
      COPY <redacted>/renv.lock /opt/ml/renv.lock
      COPY <redacted>/plumber.R /opt/ml/plumber.R
      
      RUN Rscript -e "install.packages("renv")"
      RUN R -e "renv::restore()"
      
      EXPOSE 8000
      ENTRYPOINT ["R", "-e", "pr <- plumber::plumb(rev(commandArgs())[1]); pr$run(host = '0.0.0.0', port = 8000)"]
      CMD ["/opt/ml/plumber.R"]

# create plumber.R with no packages

    Code
      cat(readr::read_lines(file.path(tmp_dir, "Dockerfile")), sep = "\n")
    Output
      # Generated by the vetiver package; edit with care
      
      FROM rocker/r-ver:<r_version>
      
      RUN apt-get update -qq && apt-get install -y --no-install-recommends \
        git \
        libcurl4-openssl-dev \
        libgit2-dev \
        libicu-dev \
        libsodium-dev \
        libssl-dev \
        make
      
      COPY <redacted>/renv.lock /opt/ml/renv.lock
      COPY <redacted>/plumber.R /opt/ml/plumber.R
      
      RUN Rscript -e "install.packages("renv")"
      RUN R -e "renv::restore()"
      
      EXPOSE 8000
      ENTRYPOINT ["R", "-e", "pr <- plumber::plumb(rev(commandArgs())[1]); pr$run(host = '0.0.0.0', port = 8000)"]
      CMD ["/opt/ml/plumber.R"]

